<div th:fragment="calendar">
    <div class="bg-white dark:bg-gray-900 rounded-xl p-4 shadow-sm max-h-[90vh] overflow-hidden flex flex-col">
        <div class="flex flex-col h-full">
            <!-- Encabezado -->
            <div class="relative flex items-center justify-between w-full">
                <!-- Flecha izquierda -->
                <a th:href="@{/principal(offset=${(offset ?: 0) - 1})}"
                    class="absolute left-0 text-gray-800 dark:text-gray-200 flex size-10 items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-gray-800">
                    <span class="material-symbols-outlined">chevron_left</span>
                </a>
                <!-- Texto centrado -->
                <p class="mx-auto text-gray-900 dark:text-white text-lg font-bold leading-tight text-center"
                    th:text="${#strings.capitalize(nombreMes)} + ' ' + ${año}"></p>

                <!-- Flecha derecha -->
                <a th:href="@{/principal(offset=${(offset ?: 0) + 1})}"
                    class="absolute right-0 text-gray-800 dark:text-gray-200 flex size-10 items-center justify-center rounded-full hover:bg-gray-100 dark:hover:bg-gray-800">
                    <span class="material-symbols-outlined">chevron_right</span>
                </a>
            </div>

            <!-- Cabecera de días -->
            <div class="grid grid-cols-7 gap-1 mt-2">

                <!-- Cambio de columnas para la fecha: Inicia con domingo -->
                <p
                    class="text-gray-500 dark:text-gray-400 text-xs font-bold text-center h-8 flex items-center justify-center">
                    Lun</p>
                <p
                    class="text-gray-500 dark:text-gray-400 text-xs font-bold text-center h-8 flex items-center justify-center">
                    Mar</p>
                <p
                    class="text-gray-500 dark:text-gray-400 text-xs font-bold text-center h-8 flex items-center justify-center">
                    Mié</p>
                <p
                    class="text-gray-500 dark:text-gray-400 text-xs font-bold text-center h-8 flex items-center justify-center">
                    Jue</p>
                <p
                    class="text-gray-500 dark:text-gray-400 text-xs font-bold text-center h-8 flex items-center justify-center">
                    Vie</p>
                <p
                    class="text-gray-500 dark:text-gray-400 text-xs font-bold text-center h-8 flex items-center justify-center">
                    Sáb</p>
                <p
                    class="text-gray-500 dark:text-gray-400 text-xs font-bold text-center h-8 flex items-center justify-center">
                    Dom</p>

            </div>

            <!-- Celdas del calendario -->
            <div class="grid grid-cols-7 gap-1 mt-2 flex-1">
                <div th:each="dia : ${dias}"
                    class="relative flex flex-col border border-gray-200 dark:border-gray-700 rounded-lg p-1 text-sm text-gray-800 dark:text-gray-200 transition-all duration-200 ease-out hover:-translate-y-1 hover:shadow-md group"
                    style="height: calc((90vh - 12rem) / 6);">

                    <!-- NOTA: Para agregar contenido en el calendario y se muestre como fondo, jugar con esta linea: -->
                    <!-- <div th:text="${dia}" class="font-medium"></div> -->

                    <!-- Tooltip "Ver" -->
                    <button
                        class="absolute bottom-2 left-1/2 -translate-x-1/2 bg-blue-600 hover:bg-blue-700 text-white text-xs px-3 py-1 rounded-md opacity-0 group-hover:opacity-100 transition-all duration-200 shadow-sm">
                        Ver
                    </button>

                    <span th:text="${dia.dayOfMonth}"></span>

                    <!-- Mostrar proyectos del día -->
                    <div th:each="proyecto : ${proyectos}"
                        th:if="${!dia.isBefore(proyecto.fechaInicio) and !dia.isAfter(proyecto.fechaFin)}"
                        class="bg-blue-200 dark:bg-blue-800 rounded px-1 py-0.5 text-xs text-blue-800 dark:text-blue-200 mt-1 cursor-pointer">
                        <span th:text="${proyecto.nombre}"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>